<html>

<head>

    <link href="style.css" rel="stylesheet" type="text/css">
    <link href="normalize.css" rel="stylesheet" type="text/css">

    <script>

      function deleteWhiteSpace(parameter)
      {
           return parameter.replace(/ +/g, "");
      }
    
    function calculate(leftOperator,operator,rightOperator)
    {
      let result = 0;

     
      if(operator==="add")
      {
        result = parseFloat(deleteWhiteSpace(leftOperator)) + parseFloat(deleteWhiteSpace(rightOperator));
      }
      else
        if(operator==="substract")
        {
         
         result = parseFloat(deleteWhiteSpace(leftOperator)) - parseFloat(deleteWhiteSpace(rightOperator));
         
        }
    else
    if(operator==="multiply")
      {
        result = parseFloat(deleteWhiteSpace(leftOperator)) * parseFloat(deleteWhiteSpace(rightOperator));
       
      }
      else
      if(operator==="divide")
      {
        result = parseFloat(deleteWhiteSpace(leftOperator)) / parseFloat(deleteWhiteSpace(rightOperator));
        
      }

      return result;
      
    }
    
    </script>

</head>


<body>

    <div class="calculator-container">

      <div class="display-container">
          <div id="display">0</div>
      </div>

      <div class="keys-container">
  
         <button class="plus-sign operators " data-action="add"> + </button>
         <button class="minus-sign operators " data-action="substract"> - </button>
         <button class="multiply-sign operators " data-action="multiply"> X </button>
         <button class="division-sign operators " data-action="divide"> / </button>
         <button class="number7 numbers"> 7 </button>
         <button class="number8 numbers"> 8 </button>
         <button class="number9 numbers"> 9 </button>
         <button class="equal-sign" data-action="calculate"> = </button>
         <button class="number4 numbers"> 4 </button>
         <button class="number5 numbers"> 5 </button>
         <button class="number6 numbers"> 6 </button>
         <button class="number1 numbers"> 1 </button>
         <button class="number2 numbers"> 2 </button>
         <button class="number3 numbers"> 3 </button>
         <button class="number0 numbers"> 0 </button>
         <button class="decimal-sign numbers" data-action="decimal">. </button>
         <button class="clear-sign numbers" data-action="clear"> AC </button>

      </div>

    </div>

    <script>
   const calculator = document.querySelector(".calculator-container");
   const keys = document.querySelector(".keys-container");
   const clearbutton = document.querySelector(".clear-sign");
    let currentOperatorKey = "";

 


    keys.addEventListener("click",e=>{
      
      const display = document.querySelector("#display");
      let clearStatus = clearbutton.textContent;
      
      if(e.target.closest("button"))
      {
         const key = e.target;
         const action = key.dataset.action;
         const keyContent = key.textContent;
         const displayNum = display.textContent;
        

          if(!action)
          {
            
            clearbutton.textContent = "CE";
           
           if(displayNum==="0")
            {
              display.textContent = keyContent;
              
            }
            else
            {
              
              if(calculator.dataset.previousKeyType==="operator")
              {
                display.textContent = keyContent;
              
                currentOperatorKey.classList.remove("highlighted");
               
              }
              else
              {
              display.textContent = (`${displayNum} ${keyContent}`);
             
              }
             
           
            }
            calculator.dataset.previousKeyType = 'number';
          }
          
          if(action==="add" || action==="substract" || action ==="multiply" || action ==="divide")
          {
            key.classList.add("highlighted");
           
           if(currentOperatorKey==="")
           {
            currentOperatorKey = key;
           }
           else
           {
            currentOperatorKey.classList.remove("highlighted");
            calculator.dataset.OperatorLeft = displayNum;
           calculator.dataset.operator = action;
            calculator.dataset.previousKeyType = 'operator';
            currentOperatorKey = key;
           }
           
            
            
          }
          if(action==="decimal")
          {
            
            if(calculator.dataset.previousKeyType==='operator')
            {
              display.textContent = "0.";
            }
            else
                if(!displayNum.includes("."))
            {
            clearbutton.textContent = "CE";
            display.textContent = displayNum + ".";
            }

            calculator.dataset.previousKeyType = 'decimal';

          }

          if(action==="calculate")
          {
           

            const firstValue = calculator.dataset.OperatorLeft;
            const operator = calculator.dataset.operator;
            
            if(calculator.dataset.previousKeyType==="number")
            {
            const secondValue = displayNum;

            display.textContent = calculate(firstValue,operator,secondValue);
            }
          

            calculator.dataset.previousKeyType = 'calculate';


          }

          if(action==="clear")
          {
            
           
            if(clearStatus==="CE")
            {
             display.textContent ="0";
             clearbutton.textContent = "AC";
             clearStatus = "AC";
            }
            else
            {
               
            }

            calculator.dataset.previousKeyType = 'clear';
            
          }

          
      }
    });
    
    </script>

</body>

</html>